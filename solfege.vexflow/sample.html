<!DOCTYPE html>
<html>
<head>
<style>
	html, body {
		min-height: 100%;
		box-sizing: border-box;
		margin: 0;
		padding: 0;
	}

	* {
		margin: 0;
		padding: 0;
		box-sizing: border-box;
	}

	#vexflow-sandbox {
		margin-top: 50px;
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
	}

</style>
</head>
<body>

	<div id="vexflow-sandbox">
	</div>

	<script src="https://unpkg.com/vexflow@4.0.0/build/vexflow.js"></script>
	<script>
		function randChoice (arr) {
			return arr[Math.floor(Math.random() * arr.length)]
		}

		function generateNotes (n) {
			if (n <= 0) {
				return ''
			}
			const noteNames = ['C', 'D', 'E', 'F', 'G', 'A', 'B']
			const octaves = ['4', '5']
			let result = `${randChoice(noteNames)}${randChoice(octaves)}/${n}`
			for (let i = 1; i < n; i++) {
				result += `, ${randChoice(noteNames)}${randChoice(octaves)}`
			}
			return result
		}
	</script>
	<script>
		// import Vex from 'vexflow';
		const delayMs = 1500
		const noteCount = 4
		const clef = 'treble'

		const vf = new Vex.Flow.Factory({
			renderer: { elementId: 'vexflow-sandbox', width: 200, height: 200 },
		});

		const score = vf.EasyScore();
		const system = vf.System();

		const notes = generateNotes(noteCount)
		console.log(notes)

		system.addStave({
			voices: [
				score.voice(score.notes(notes, { stem: 'up' })),
			],
		}).addClef(clef)

		const $sb = document.getElementById('vexflow-sandbox')
		const displayWas = $sb.style.display

		setTimeout(() => $sb.style.display = 'none', delayMs)

		setTimeout(() => $sb.style.display = displayWas, 4*delayMs)

		vf.draw();
	</script>
</body>
</html>
